<!--
  @description       : 
  @author            : npz
  @group             : 
  @last modified on  : 27-01-2025
  @last modified by  : npz
-->
<aura:component controller="WebinarTicketController" implements="flexipage:availableForAllPageTypes,force:appHostable" access="global">
    <!-- Attributes -->
    <aura:attribute name="statusOptions" type="List" />
    <aura:attribute name="selectedStatus" type="String" />
    <aura:attribute name="tickets" type="List" />
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="isModalOpen" type="Boolean" default="false" />

    <!-- Handlers -->
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    
    <lightning:card title="Aura Webinar Ticket">
        <div class="slds-var-m-around_medium">
            <div class="slds-grid slds-grid_align-spread">
                <div></div>
                <lightning:button label="New Ticket" variant="brand-outline" onclick="{!c.openModal}" />
            </div>

            <lightning:combobox 
                name="statusFilter"
                label="Filter by Status"
                value="{!v.selectedStatus}"
                options="{!v.statusOptions}"
                onchange="{!c.handleStatusChange}" />
        </div>
        <div class="slds-var-m-around_medium">
            <lightning:datatable
                data="{!v.tickets}"
                columns="{!v.columns}"
                keyField="Id"
                hideCheckboxColumn="true"
                class="slds-var-m-top_medium" />
        </div>
    </lightning:card>

    <aura:if isTrue="{!v.isModalOpen}">
        <c:webinarTicketLWC
            isModalOpen="{!v.isModalOpen}"
            onmodalclose="{!c.closeModal}"
            onticketcreated="{!c.handleTicketCreated}" />
    </aura:if>
</aura:component>